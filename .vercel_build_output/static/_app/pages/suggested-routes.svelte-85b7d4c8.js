import{S as t,i as n,s as e,j as r,m as a,o,x as s,u as l,v as c,K as i,l as u,f as h,r as f,w as m,d,Z as p,t as g,g as v,N as $,a0 as k,a1 as b,h as w,k as x,e as E,n as j,c as N,a as S,b as P,E as y,Y as A}from"../chunks/vendor-d0016f91.js";import{B as T}from"../chunks/Box-c7b3cfc0.js";import{R as L}from"../chunks/RouteTimeline-dd8b7935.js";import{r as M,d as R,o as B}from"../chunks/_stores-e4befa5b.js";import"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";import"../chunks/stores-e132606c.js";function D(t,n,e){const r=t.slice();return r[7]=n[e],r}function _(t){let n;return{c(){n=g("enter location to search")},l(t){n=v(t,"enter location to search")},m(t,e){h(t,n,e)},p:$,i:$,o:$,d(t){t&&d(n)}}}function C(t){let n,e,r,a={ctx:t,current:null,token:null,hasCatch:!0,pending:Z,then:K,catch:I,value:6,error:10,blocks:[,,,]};return k(e=t[0],a),{c(){n=u(),a.block.c()},l(t){n=u(),a.block.l(t)},m(t,e){h(t,n,e),a.block.m(t,a.anchor=e),a.mount=()=>n.parentNode,a.anchor=n,r=!0},p(n,r){t=n,a.ctx=t,1&r&&e!==(e=t[0])&&k(e,a)||b(a,t,r)},i(t){r||(s(a.block),r=!0)},o(t){for(let n=0;n<3;n+=1){const t=a.blocks[n];l(t)}r=!1},d(t){t&&d(n),a.block.d(t),a.token=null,a=null}}}function I(t){let n,e,r=t[10].message+"";return{c(){n=g("Error: "),e=g(r)},l(t){n=v(t,"Error: "),e=v(t,r)},m(t,r){h(t,n,r),h(t,e,r)},p(t,n){1&n&&r!==(r=t[10].message+"")&&w(e,r)},i:$,o:$,d(t){t&&d(n),t&&d(e)}}}function K(t){let n,e,r=t[6],a=[];for(let s=0;s<r.length;s+=1)a[s]=Y(D(t,r,s));const o=t=>l(a[t],1,1,(()=>{a[t]=null}));return{c(){n=E("div");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){n=N(t,"DIV",{class:!0});var e=S(n);for(let n=0;n<a.length;n+=1)a[n].l(e);e.forEach(d),this.h()},h(){P(n,"class","timelines svelte-f040hi")},m(t,r){h(t,n,r);for(let e=0;e<a.length;e+=1)a[e].m(n,null);e=!0},p(t,e){if(1&e){let l;for(r=t[6],l=0;l<r.length;l+=1){const o=D(t,r,l);a[l]?(a[l].p(o,e),s(a[l],1)):(a[l]=Y(o),a[l].c(),s(a[l],1),a[l].m(n,null))}for(f(),l=r.length;l<a.length;l+=1)o(l);m()}},i(t){if(!e){for(let t=0;t<r.length;t+=1)s(a[t]);e=!0}},o(t){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)l(a[n]);e=!1},d(t){t&&d(n),A(a,t)}}}function V(t){let n,e,r,a=F(t[7].duration)+"";return{c(){n=E("span"),e=g(a),r=g("\n\t\t\t\t\t\t\thr"),this.h()},l(t){n=N(t,"SPAN",{class:!0});var o=S(n);e=v(o,a),o.forEach(d),r=v(t,"\n\t\t\t\t\t\t\thr"),this.h()},h(){P(n,"class","number svelte-f040hi")},m(t,a){h(t,n,a),y(n,e),h(t,r,a)},p(t,n){1&n&&a!==(a=F(t[7].duration)+"")&&w(e,a)},d(t){t&&d(n),t&&d(r)}}}function Y(t){let n,e,i,u,f,m,p,$,k,b,A,T,M,R,B,D,_,C=F(t[7].duration),I=G(t[7].duration)+"",K=new Date(t[7].arriveTime).toLocaleString("en",{hour:"numeric",minute:"numeric"})+"",Y=Math.round(t[7].walkTime/60)+"";n=new L({props:{route:t[7],longestRoute:t[6].reduce(H,0)}});let Z=C&&V(t);return{c(){r(n.$$.fragment),e=x(),i=E("span"),Z&&Z.c(),u=x(),f=E("span"),m=g(I),p=g("\n\t\t\t\t\t\tmin"),$=x(),k=E("span"),b=g("Leave now, arrive at\n\t\t\t\t\t\t"),A=E("span"),T=g(K),M=g(".\n\t\t\t\t\t\t"),R=E("span"),B=g(Y),D=g(" min walking time.\n\t\t\t\t\t"),this.h()},l(t){a(n.$$.fragment,t),e=j(t),i=N(t,"SPAN",{class:!0});var r=S(i);Z&&Z.l(r),u=j(r),f=N(r,"SPAN",{class:!0});var o=S(f);m=v(o,I),o.forEach(d),p=v(r,"\n\t\t\t\t\t\tmin"),r.forEach(d),$=j(t),k=N(t,"SPAN",{class:!0});var s=S(k);b=v(s,"Leave now, arrive at\n\t\t\t\t\t\t"),A=N(s,"SPAN",{class:!0});var l=S(A);T=v(l,K),l.forEach(d),M=v(s,".\n\t\t\t\t\t\t"),R=N(s,"SPAN",{class:!0});var c=S(R);B=v(c,Y),c.forEach(d),D=v(s," min walking time.\n\t\t\t\t\t"),s.forEach(d),this.h()},h(){P(f,"class","number svelte-f040hi"),P(i,"class","time svelte-f040hi"),P(A,"class","number svelte-f040hi"),P(R,"class","number svelte-f040hi"),P(k,"class","extra svelte-f040hi")},m(t,r){o(n,t,r),h(t,e,r),h(t,i,r),Z&&Z.m(i,null),y(i,u),y(i,f),y(f,m),y(i,p),h(t,$,r),h(t,k,r),y(k,b),y(k,A),y(A,T),y(k,M),y(k,R),y(R,B),y(k,D),_=!0},p(t,e){const r={};1&e&&(r.route=t[7]),1&e&&(r.longestRoute=t[6].reduce(H,0)),n.$set(r),1&e&&(C=F(t[7].duration)),C?Z?Z.p(t,e):(Z=V(t),Z.c(),Z.m(i,u)):Z&&(Z.d(1),Z=null),(!_||1&e)&&I!==(I=G(t[7].duration)+"")&&w(m,I),(!_||1&e)&&K!==(K=new Date(t[7].arriveTime).toLocaleString("en",{hour:"numeric",minute:"numeric"})+"")&&w(T,K),(!_||1&e)&&Y!==(Y=Math.round(t[7].walkTime/60)+"")&&w(B,Y)},i(t){_||(s(n.$$.fragment,t),_=!0)},o(t){l(n.$$.fragment,t),_=!1},d(t){c(n,t),t&&d(e),t&&d(i),Z&&Z.d(),t&&d($),t&&d(k)}}}function Z(t){let n;return{c(){n=g("loading...")},l(t){n=v(t,"loading...")},m(t,e){h(t,n,e)},p:$,i:$,o:$,d(t){t&&d(n)}}}function q(t){let n,e,r,a;const o=[C,_],c=[];function i(t,n){return t[2].name&&t[1].name?0:1}return n=i(t),e=c[n]=o[n](t),{c(){e.c(),r=u()},l(t){e.l(t),r=u()},m(t,e){c[n].m(t,e),h(t,r,e),a=!0},p(t,a){let u=n;n=i(t),n===u?c[n].p(t,a):(f(),l(c[u],1,1,(()=>{c[u]=null})),m(),e=c[n],e?e.p(t,a):(e=c[n]=o[n](t),e.c()),s(e,1),e.m(r.parentNode,r))},i(t){a||(s(e),a=!0)},o(t){l(e),a=!1},d(t){c[n].d(t),t&&d(r)}}}function z(t){let n,e;return n=new T({props:{$$slots:{default:[q]},$$scope:{ctx:t}}}),{c(){r(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,r){o(n,t,r),e=!0},p(t,[e]){const r={};2055&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(s(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){c(n,t)}}}function F(t){return Math.floor(t/3600)}function G(t){return Math.floor((t-3600*F(t))/60)}const H=(t,n)=>t>(n=n.distance)?t:n;function J(t,n,e){let r,a,o;i(t,M,(t=>e(3,r=t))),i(t,R,(t=>e(1,a=t))),i(t,B,(t=>e(2,o=t)));var s=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(a,o){function s(t){try{c(r.next(t))}catch(n){o(n)}}function l(t){try{c(r.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,l)}c((r=r.apply(t,n||[])).next())}))};let l=r;return!l.length&&o.name&&a.name&&(l=function({latitude:t,longitude:n},{latitude:e,longitude:r}){return s(this,void 0,void 0,(function*(){const a=`${t},${n}`,o=`${e},${r}`,s=yield fetch(`/api/directions?from=${a}&to=${o}`);return yield s.json()}))}(o,a).then((t=>p(M,r=t,r)))),[l,a,o]}class O extends t{constructor(t){super(),n(this,t,J,z,e,{})}}export{O as default};
