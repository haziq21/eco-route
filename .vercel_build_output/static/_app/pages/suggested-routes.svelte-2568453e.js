import{S as t,i as n,s as e,j as r,m as a,o,x as s,u as l,v as c,L as i,l as u,f,r as h,w as m,d,_ as p,t as g,g as v,O as $,a1 as k,a2 as w,h as b,k as x,e as E,n as j,c as S,a as N,b as P,E as y,Z as A}from"../chunks/vendor-ba6e0429.js";import{B as L}from"../chunks/Box-53f6f880.js";import{R as T}from"../chunks/RouteTimeline-f6af81df.js";import{r as M,d as R,o as _}from"../chunks/_stores-027b8861.js";import"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";import"../chunks/stores-1c755569.js";function B(t,n,e){const r=t.slice();return r[7]=n[e],r}function D(t){let n;return{c(){n=g("enter location to search")},l(t){n=v(t,"enter location to search")},m(t,e){f(t,n,e)},p:$,i:$,o:$,d(t){t&&d(n)}}}function C(t){let n,e,r,a={ctx:t,current:null,token:null,hasCatch:!0,pending:q,then:O,catch:I,value:6,error:10,blocks:[,,,]};return k(e=t[0],a),{c(){n=u(),a.block.c()},l(t){n=u(),a.block.l(t)},m(t,e){f(t,n,e),a.block.m(t,a.anchor=e),a.mount=()=>n.parentNode,a.anchor=n,r=!0},p(n,r){t=n,a.ctx=t,1&r&&e!==(e=t[0])&&k(e,a)||w(a,t,r)},i(t){r||(s(a.block),r=!0)},o(t){for(let n=0;n<3;n+=1){const t=a.blocks[n];l(t)}r=!1},d(t){t&&d(n),a.block.d(t),a.token=null,a=null}}}function I(t){let n,e,r=t[10].message+"";return{c(){n=g("Error: "),e=g(r)},l(t){n=v(t,"Error: "),e=v(t,r)},m(t,r){f(t,n,r),f(t,e,r)},p(t,n){1&n&&r!==(r=t[10].message+"")&&b(e,r)},i:$,o:$,d(t){t&&d(n),t&&d(e)}}}function O(t){let n,e,r=t[6],a=[];for(let s=0;s<r.length;s+=1)a[s]=Z(B(t,r,s));const o=t=>l(a[t],1,1,(()=>{a[t]=null}));return{c(){n=E("div");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){n=S(t,"DIV",{class:!0});var e=N(n);for(let n=0;n<a.length;n+=1)a[n].l(e);e.forEach(d),this.h()},h(){P(n,"class","timelines svelte-f040hi")},m(t,r){f(t,n,r);for(let e=0;e<a.length;e+=1)a[e].m(n,null);e=!0},p(t,e){if(1&e){let l;for(r=t[6],l=0;l<r.length;l+=1){const o=B(t,r,l);a[l]?(a[l].p(o,e),s(a[l],1)):(a[l]=Z(o),a[l].c(),s(a[l],1),a[l].m(n,null))}for(h(),l=r.length;l<a.length;l+=1)o(l);m()}},i(t){if(!e){for(let t=0;t<r.length;t+=1)s(a[t]);e=!0}},o(t){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)l(a[n]);e=!1},d(t){t&&d(n),A(a,t)}}}function V(t){let n,e,r,a=G(t[7].duration)+"";return{c(){n=E("span"),e=g(a),r=g("\n\t\t\t\t\t\t\thr"),this.h()},l(t){n=S(t,"SPAN",{class:!0});var o=N(n);e=v(o,a),o.forEach(d),r=v(t,"\n\t\t\t\t\t\t\thr"),this.h()},h(){P(n,"class","number svelte-f040hi")},m(t,a){f(t,n,a),y(n,e),f(t,r,a)},p(t,n){1&n&&a!==(a=G(t[7].duration)+"")&&b(e,a)},d(t){t&&d(n),t&&d(r)}}}function Z(t){let n,e,i,u,h,m,p,$,k,w,A,L,M,R,_,B,D,C=G(t[7].duration),I=H(t[7].duration)+"",O=new Date(t[7].arriveTime).toLocaleString("en",{hour:"numeric",minute:"numeric"})+"",Z=Math.round(t[7].walkTime/60)+"";n=new T({props:{route:t[7],longestRoute:t[6].reduce(J,0)}});let q=C&&V(t);return{c(){r(n.$$.fragment),e=x(),i=E("span"),q&&q.c(),u=x(),h=E("span"),m=g(I),p=g("\n\t\t\t\t\t\tmin"),$=x(),k=E("span"),w=g("Leave now, arrive at\n\t\t\t\t\t\t"),A=E("span"),L=g(O),M=g(".\n\t\t\t\t\t\t"),R=E("span"),_=g(Z),B=g(" min walking time.\n\t\t\t\t\t"),this.h()},l(t){a(n.$$.fragment,t),e=j(t),i=S(t,"SPAN",{class:!0});var r=N(i);q&&q.l(r),u=j(r),h=S(r,"SPAN",{class:!0});var o=N(h);m=v(o,I),o.forEach(d),p=v(r,"\n\t\t\t\t\t\tmin"),r.forEach(d),$=j(t),k=S(t,"SPAN",{class:!0});var s=N(k);w=v(s,"Leave now, arrive at\n\t\t\t\t\t\t"),A=S(s,"SPAN",{class:!0});var l=N(A);L=v(l,O),l.forEach(d),M=v(s,".\n\t\t\t\t\t\t"),R=S(s,"SPAN",{class:!0});var c=N(R);_=v(c,Z),c.forEach(d),B=v(s," min walking time.\n\t\t\t\t\t"),s.forEach(d),this.h()},h(){P(h,"class","number svelte-f040hi"),P(i,"class","time svelte-f040hi"),P(A,"class","number svelte-f040hi"),P(R,"class","number svelte-f040hi"),P(k,"class","extra svelte-f040hi")},m(t,r){o(n,t,r),f(t,e,r),f(t,i,r),q&&q.m(i,null),y(i,u),y(i,h),y(h,m),y(i,p),f(t,$,r),f(t,k,r),y(k,w),y(k,A),y(A,L),y(k,M),y(k,R),y(R,_),y(k,B),D=!0},p(t,e){const r={};1&e&&(r.route=t[7]),1&e&&(r.longestRoute=t[6].reduce(J,0)),n.$set(r),1&e&&(C=G(t[7].duration)),C?q?q.p(t,e):(q=V(t),q.c(),q.m(i,u)):q&&(q.d(1),q=null),(!D||1&e)&&I!==(I=H(t[7].duration)+"")&&b(m,I),(!D||1&e)&&O!==(O=new Date(t[7].arriveTime).toLocaleString("en",{hour:"numeric",minute:"numeric"})+"")&&b(L,O),(!D||1&e)&&Z!==(Z=Math.round(t[7].walkTime/60)+"")&&b(_,Z)},i(t){D||(s(n.$$.fragment,t),D=!0)},o(t){l(n.$$.fragment,t),D=!1},d(t){c(n,t),t&&d(e),t&&d(i),q&&q.d(),t&&d($),t&&d(k)}}}function q(t){let n;return{c(){n=g("loading...")},l(t){n=v(t,"loading...")},m(t,e){f(t,n,e)},p:$,i:$,o:$,d(t){t&&d(n)}}}function z(t){let n,e,r,a;const o=[C,D],c=[];function i(t,n){return t[2].name&&t[1].name?0:1}return n=i(t),e=c[n]=o[n](t),{c(){e.c(),r=u()},l(t){e.l(t),r=u()},m(t,e){c[n].m(t,e),f(t,r,e),a=!0},p(t,a){let u=n;n=i(t),n===u?c[n].p(t,a):(h(),l(c[u],1,1,(()=>{c[u]=null})),m(),e=c[n],e?e.p(t,a):(e=c[n]=o[n](t),e.c()),s(e,1),e.m(r.parentNode,r))},i(t){a||(s(e),a=!0)},o(t){l(e),a=!1},d(t){c[n].d(t),t&&d(r)}}}function F(t){let n,e;return n=new L({props:{$$slots:{default:[z]},$$scope:{ctx:t}}}),{c(){r(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,r){o(n,t,r),e=!0},p(t,[e]){const r={};2055&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(s(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){c(n,t)}}}function G(t){return Math.floor(t/3600)}function H(t){return Math.floor((t-3600*G(t))/60)}const J=(t,n)=>t>(n=n.distance)?t:n;function K(t,n,e){let r,a,o;i(t,M,(t=>e(3,r=t))),i(t,R,(t=>e(1,a=t))),i(t,_,(t=>e(2,o=t)));var s=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(a,o){function s(t){try{c(r.next(t))}catch(n){o(n)}}function l(t){try{c(r.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,l)}c((r=r.apply(t,n||[])).next())}))};let l=r;return!l.length&&o.name&&a.name&&(l=function({latitude:t,longitude:n},{latitude:e,longitude:r}){return s(this,void 0,void 0,(function*(){const a=`${t},${n}`,o=`${e},${r}`,s=yield fetch(`/api/directions?from=${a}&to=${o}`);return yield s.json()}))}(o,a).then((t=>p(M,r=t,r)))),[l,a,o]}class Q extends t{constructor(t){super(),n(this,t,K,F,e,{})}}export{Q as default};
